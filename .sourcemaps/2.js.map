{"version":3,"sources":["../../src/pages/single-ligne/single-ligne.module.ts","../../src/models/type-note.ts","../../src/models/term-model.ts","../../src/pages/single-ligne/single-ligne.ts"],"names":[],"mappings":"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","file":"2.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { IonicPageModule } from 'ionic-angular';\r\n\r\nimport { SingleLignePage } from './single-ligne';\r\n\r\n@NgModule({\r\n  declarations: [\r\n    SingleLignePage,\r\n  ],\r\n  imports: [\r\n    IonicPageModule.forChild(SingleLignePage),\r\n  ],\r\n  exports: [\r\n    SingleLignePage\r\n  ]\r\n})\r\nexport class SingleLignePageModule { }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/single-ligne/single-ligne.module.ts","import { Term_Model } from '../models/term-model';\r\n\r\nexport class Type_Note extends Term_Model {\r\n\r\n\tprivate interfaceTypeNote = {\r\n\t\tcategory_id: String,\r\n\t\tspecial_treatment: String,\r\n\t}\r\n\r\n\tconstructor(fields: any) {\r\n\t\tsuper(fields);\r\n\r\n\t\tfor (const f in fields) {\r\n\t\t\tif(this.interfaceTypeNote[f]) {\r\n\t\t\t\tthis[f] = fields[f];\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/type-note.ts","export class Term_Model {\r\n\r\n\tprivate interfaceTermModel = {\r\n\t\tid: Number,\r\n\t\ttype: String,\r\n\t\tterm_taxonomy_id: Number,\r\n\t\tname: String,\r\n\t\tdescription: String,\r\n\t\tslug: String,\r\n\t\tparent_id: Number,\r\n\t\tpost_id: String\r\n\t};\r\n\r\n\tconstructor(fields: any) {\r\n\t\tfor (const f in fields) {\r\n\t\t\tif(this.interfaceTermModel[f]) {\r\n\t\t\t\tthis[f] = fields[f];\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/term-model.ts","import { Component } from '@angular/core';\nimport { AlertController, LoadingController, IonicPage, NavParams, ViewController, NavController } from 'ionic-angular';\nimport { Validators, FormBuilder, FormGroup } from '@angular/forms';\n\nimport { SingleNotePage } from '../single-note/single-note';\n\nimport { Ligne } from '../../models/ligne';\nimport { Lignes } from '../../providers/lignes/lignes';\n\nimport { Type_Note } from '../../models/type-note';\nimport { Type_Notes } from '../../providers/type-note/type-note';\n\nimport { Observable } from 'rxjs/Observable';\nimport 'rxjs/add/operator/map';\nimport { Api } from '../../providers/api/api';\n\nimport { File } from '@ionic-native/file';\n// import { FilePath } from '@ionic-native/file-path';\n// import { Transfer } from '@ionic-native/transfer';\nimport { Camera, CameraOptions } from '@ionic-native/camera';\n\n@IonicPage()\n@Component({\n  selector: 'page-single-ligne',\n  templateUrl: 'single-ligne.html'\n})\nexport class SingleLignePage {\n\tligneId: any;\n\tligne: Ligne;\n\ttype_note: Type_Note[] = [];\n\tloading: any;\n\tcontrolKm: boolean = false;\n\n\teditLigne: any;\n\n\toptions: CameraOptions = {\n\t\tquality: 100,\n\t\tdestinationType: this.camera.DestinationType.DATA_URL,\n\t\tencodingType: this.camera.EncodingType.JPEG,\n\t\tmediaType: this.camera.MediaType.PICTURE\n\t}\n\n  constructor(private camera: Camera, public navCtrl: NavController, private api: Api, public alertCtrl: AlertController, public loadingCtrl: LoadingController, public type_noteApi: Type_Notes, public formBuilder: FormBuilder, public ligneApi: Lignes, public viewCtrl: ViewController, public navParams: NavParams) {\n\t\tthis.presentLoadingDefault();\n\t\tthis.ligne = this.navParams.get('ligneData');\n\n\t\tlet noteTaxId = ( this.ligne['current_category']['term_taxonomy_id'] ) ? this.ligne['current_category']['term_taxonomy_id'] : '';\n\t\tthis.editLigne = this.formBuilder.group({\n\t\t\ttitle: [this.ligne['title'], Validators.required],\n\t\t\tdate: [this.ligne['date']['date_input']['iso8601']],\n\t\t\tdistance: [this.ligne['distance']],\n\t\t\ttax_inclusive_amount: [this.ligne['tax_inclusive_amount']],\n\t\t\ttax_amount: [this.ligne['tax_amount']],\n\t\t\ttype_note_id: [noteTaxId]\n\t\t});\n\n\t\tthis.getAllTypeNote();\n\n\t\tthis.api.getAuthData().then((data) => {\n\t\t\tif(! data) {\n\t\t\t\tthis.navCtrl.push('LoginPage');\n\t\t\t}\n\t\t});\n\t}\n\n\tpresentLoadingDefault() {\n\t\tthis.loading = this.loadingCtrl.create({\n\t\t\tspinner: 'crescent',\n\t\t\tcontent: 'Please wait...'\n\t\t});\n\n\t\tthis.loading.present();\n\t}\n\n\tgetAllTypeNote() {\n\t\tthis.type_noteApi.get().subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.type_note = [];\n\t\t\t\tfor (let item of data) {\n\t\t\t\t\tthis.type_note.push(new Type_Note(item));\n\t\t\t\t}\n\t\t\t\tthis.loading.dismiss();\n\t\t\t}\n\t\t)\n\t}\n\n\tcancelEdit() {\n\t\tthis.viewCtrl.dismiss();\n\t}\n\n\tsaveEdit(form) {\n\t\tthis.presentLoadingDefault();\n\n\t\tlet result = Object.assign(this.ligne, form.value); // On envoie les resultats sur l'objet initial\n\n\t\tresult.taxonomy._type_note[0] = form.value.type_note_id.id;\n\n\t\t/* Conversion de la date en Mysql */\n\t\tresult.date = this.isoToMysql(result.date);\n\n\t\tthis.ligneApi.post(result).subscribe(\n\t\t\tdata => {\n\t\t\t\tthis.loading.dismiss();\n\t\t\t\tthis.viewCtrl.dismiss(result);\n\t\t\t},\n\t\t\terror => {\n\t\t\t\tthis.loading.dismiss();\n\t\t\t\tconst alert = this.alertCtrl.create({\n\t\t\t\t\ttitle: 'Erreur',\n\t\t\t\t\tsubTitle: error,\n\t\t\t\t\tbuttons: ['Ok']\n\t\t\t\t});\n\t\t\t\talert.present();\n\t\t\t}\n\t\t);\n\n\t}\n\n\tisoToMysql(iso) {\n\t\tif ( iso == undefined ) {\n\t\t\treturn;\n\t\t}\n\t\tiso.replace(\"T\", \" \");\n\t\tiso.replace(\"Z\", \"\");\n\t\treturn iso;\n\t}\n\n\tchangeType(type: number): void {\n\t\tfor (let mon_type of this.type_note) {\n\t\t\tif( mon_type['id'] == type ) {\n\t\t\t\tif ( mon_type['special_treatment'].length > 0 || mon_type['special_treatment'] != undefined ) {\n\t\t\t\t\tconsole.log(mon_type);\n\t\t\t\t\tthis.controlKm = true;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tthis.controlKm = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.controlKm = false;\n\t\t\t}\n\t\t}\n\t}\n\n\tuploadPicture() {\n\t\tthis.camera.getPicture(this.options).then((imageData) => {\n\t\t\t// imageData is either a base64 encoded string or a file URI\n\t\t\t// If it's base64:\n\t\t\tlet base64Image = 'data:image/jpeg;base64,' + imageData;\n\t\t}, (err) => {\n\t\t\t// Handle error\n\t\t});\n\t}\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/pages/single-ligne/single-ligne.ts"],"sourceRoot":""}